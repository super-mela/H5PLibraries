!function(){"use strict";let t=function(){function t(){}return t.extend=function(){for(let t=1;t<arguments.length;t++)for(let e in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],e)&&("object"==typeof arguments[0][e]&&"object"==typeof arguments[t][e]?this.extend(arguments[0][e],arguments[t][e]):arguments[0][e]=arguments[t][e]);return arguments[0]},t.htmlDecode=function(t){return(new DOMParser).parseFromString(t,"text/html").documentElement.textContent},t.stripHTML=function(t){const e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""},t.closestParent=function(t,e){if("object"!=typeof t||"string"!=typeof e)return null;if(!t.parentNode)return null;if("."===e.substring(0,1)){if(e.split(".").filter((t=>""!==t)).every((e=>t.parentNode?.classList?.contains(e))))return t.parentNode}else if("#"===e.substring(0,1)){if("function"==typeof t.parentNode.getAttribute&&t.parentNode.getAttribute("id")===e.substr(1))return t.parentNode}else if(t.parentNode.tagName.toLowerCase()===e.toLowerCase())return t.parentNode;return this.closestParent(t.parentNode,e)},t.shuffleArray=function(t){const e=[...t];let i,s,n;for(n=e.length-1;n>0;n--)i=Math.floor(Math.random()*(n+1)),s=e[n],e[n]=e[i],e[i]=s;return e},t}();var e=t;let i=function(){function t(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.params=t,this.callbacks=e.extend({onPuzzleTileCreated:()=>{},onPuzzleTileMoveStarted:()=>{},onPuzzleTileMoved:()=>{},onPuzzleTileMoveEnded:()=>{}},i),this.pathBorders={},this.moveInitialX=null,this.moveInitialY=null,this.deltaX=null,this.deltaY=null,this.isDone=!1,this.scale=1,this.backgroundImage=new Image,this.backgroundImage.addEventListener("load",(()=>{this.handleImageLoaded()})),this.backgroundImage.crossOrigin=t.imageCrossOrigin,this.backgroundImage.src=t.imageSource,this.handleTileMoveStarted=this.handleTileMoveStarted.bind(this),this.handleTileMoved=this.handleTileMoved.bind(this),this.handleTileMoveEnded=this.handleTileMoveEnded.bind(this),this.handleAnimationMoveEnded=this.handleAnimationMoveEnded.bind(this),this.tile=document.createElement("div"),this.tile.classList.add("h5p-jigsaw-puzzle-tile"),this.setScale(this.scale)}var i=t.prototype;return i.getDOM=function(){return this.tile},i.getHTML=function(){return this.tile.outerHTML},i.buildSVG=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=document.createElement("svg");e.setAttribute("width","100%"),e.setAttribute("height","100%"),e.setAttribute("viewBox",`0 0 ${t.width+t.stroke} ${t.height+t.stroke}`);const i=document.createElement("defs"),s=document.createElement("pattern");s.setAttribute("id",`h5p-jigsaw-puzzle-${this.params.uuid}-pattern-${this.params.id}`),s.setAttribute("width",this.params.size.width),s.setAttribute("height",this.params.size.height),s.setAttribute("x",-(this.params.gridPosition.x*this.params.baseWidth*this.scale-Math.sign(this.params.gridPosition.x)*this.knob/2)/this.width),s.setAttribute("y",-(this.params.gridPosition.y*this.params.baseHeight*this.scale-Math.sign(this.params.gridPosition.y)*this.knob/2)/this.height);const n=document.createElement("image");n.setAttribute("width",t.image.naturalWidth),n.setAttribute("height",t.image.naturalHeight),n.setAttribute("href",t.image.src),s.appendChild(n),i.appendChild(s),e.appendChild(i);const a=document.createElement("path");return a.setAttribute("fill",`url(#h5p-jigsaw-puzzle-${this.params.uuid}-pattern-${this.params.id})`),a.setAttribute("stroke-opacity","0"),a.setAttribute("stroke-width",t.stroke),a.setAttribute("d",this.buildPathDash({width:t.baseWidth,height:t.baseHeight,type:t.type,stroke:t.stroke})),e.appendChild(a),["top","right","bottom","left"].forEach((i=>{this.pathBorders[i]=this.buildPathDOM({stroke:t.stroke,color:this.params.borderColor,width:t.baseWidth,height:t.baseHeight,orientation:this.params.borders[i].orientation,opacity:this.params.borders[i].opacity,side:i,gridPosition:{x:this.params.gridPosition.x,y:this.params.gridPosition.y},className:`border-${i}`}),e.appendChild(this.pathBorders[i])})),e},i.buildPathDOM=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=document.createElement("path");return t.className&&e.classList.add(t.className),e.setAttribute("fill-opacity","0"),e.setAttribute("stroke",t.color),e.setAttribute("stroke-width",t.stroke),e.setAttribute("stroke-opacity",t.opacity),e.setAttribute("d",this.buildPathSegment({width:t.width,height:t.height,orientation:t.orientation,stroke:t.stroke,side:t.side,gridPosition:{x:this.params.gridPosition.x,y:this.params.gridPosition.y}})),e},i.buildPathSegment=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=Math.min(e.width,e.height)/2;let s="right"===e.side?e.width:0;0!==e.gridPosition.x&&(s+=e.stroke/2+i/2);let n="bottom"===e.side?e.height:0;0!==e.gridPosition.y&&(n+=e.stroke/2+i/2);const a=`M ${s}, ${n}`,o="top"===e.side||"bottom"===e.side?"horizontal":"vertical";return`${a} ${t.PATHS_BORDER[`${o}-${e.orientation}`]}`.replace(/@w/g,e.width).replace(/@h/g,e.height).replace(/@knob/g,i).replace(/@gapw/g,(e.width-i)/2).replace(/@gaph/g,(e.height-i)/2)},i.buildPathDash=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=Math.min(e.width,e.height)/2;return t.PATHS[e.type].replace(/@offknob/g,e.stroke/2+i/2).replace(/@off/g,e.stroke/2).replace(/@w/g,e.width).replace(/@h/g,e.height).replace(/@knob/g,i).replace(/@gapw/g,(e.width-i)/2).replace(/@gaph/g,(e.height-i)/2)},i.updateParams=function(t){this.params=e.extend(this.params,t),this.repaintSVG()},i.setZIndex=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";""!==t&&"number"!=typeof t||(this.tile.style.zIndex=t)},i.getGridPosition=function(){return{x:this.params.gridPosition.x,y:this.params.gridPosition.y}},i.getId=function(){return this.params.id},i.setScale=function(t){"number"!=typeof t||t<0||(this.scale=t,this.width=this.scale*this.params.width,this.height=this.scale*this.params.height,this.knob=this.scale*this.params.knobSize,this.stroke=this.scale*this.params.stroke,this.tile.style.width=`${this.width+this.stroke}px`,this.tile.style.height=`${this.height+this.stroke}px`)},i.getSize=function(){return this.tile.style.width&&this.tile.style.height?{baseWidth:this.params.baseWidth,baseHeight:this.params.baseHeight,width:this.width,height:this.height,knob:this.knob,stroke:this.stroke}:null},i.getPosition=function(){return this.tile.style.left&&this.tile.style.top?{x:parseFloat(this.tile.style.left),y:parseFloat(this.tile.style.top)}:null},i.setPosition=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("number"!=typeof t.x||"number"!=typeof t.y)return;const e=this.params.container,i=e.offsetLeft,s=e.offsetLeft+e.offsetWidth-this.width,n=e.offsetTop,a=e.offsetTop+e.offsetHeight-this.height;this.tile.style.left=`${Math.min(Math.max(i,t.x),s)}px`,this.tile.style.top=`${Math.min(Math.max(n,t.y),a)}px`},i.setBorders=function(t){for(let e in t){if("boolean"!=typeof t[e])return;const i=this.tile.querySelector(`.border-${e}`);i&&i.setAttribute("stroke-opacity",t[e]?"1":"0")}},i.setDone=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isDone=t},i.show=function(){this.tile.classList.remove("hidden")},i.hide=function(){this.tile.classList.add("hidden")},i.ghost=function(){this.tile.classList.add("ghosted")},i.unghost=function(){this.tile.classList.remove("ghosted")},i.enable=function(){this.tile.removeAttribute("disabled","disabled"),this.isDisabled=!1},i.disable=function(){this.isDisabled=!0,this.tile.setAttribute("disabled","disabled")},i.putInBackground=function(){this.tile.classList.remove("onTop")},i.putOnTop=function(){this.tile.classList.add("onTop")},i.animateMove=function(){this.tile.removeEventListener("transitionend",this.handleAnimationMoveEnded),this.tile.addEventListener("transitionend",this.handleAnimationMoveEnded),this.tile.classList.add("animate-move")},i.repaintSVG=function(){const t=this.buildSVG({id:this.params.id,gridPosition:this.params.gridPosition,baseWidth:this.params.baseWidth,baseHeight:this.params.baseHeight,width:this.params.width,height:this.params.height,stroke:this.params.stroke,image:this.backgroundImage,type:this.params.type});this.tile.innerHTML=t.outerHTML},i.handleImageLoaded=function(){this.setScale(this.scale),this.repaintSVG(),this.callbacks.onPuzzleTileCreated(this),this.tile.addEventListener("touchstart",this.handleTileMoveStarted,!0),this.tile.addEventListener("mousedown",this.handleTileMoveStarted,!0)},i.handleTileMoveStarted=function(t){this.isDisabled||(this.tile.classList.remove("animate-move"),(t=t||window.event).preventDefault(),"touchstart"===t.type?(this.moveInitialX=this.tile.offsetLeft-t.touches[0].clientX,this.moveInitialY=this.tile.offsetTop-t.touches[0].clientY,this.tile.addEventListener("touchmove",this.handleTileMoved,!1),this.tile.addEventListener("touchend",this.handleTileMoveEnded,!1)):(this.moveInitialX=this.tile.offsetLeft-t.clientX,this.moveInitialY=this.tile.offsetTop-t.clientY,document.addEventListener("mousemove",this.handleTileMoved,!0),document.addEventListener("mouseup",this.handleTileMoveEnded,!0)),this.callbacks.onPuzzleTileMoveStarted(this))},i.handleTileMoved=function(t){(t=t||window.event).preventDefault(),"touchmove"===t.type?this.setPosition({x:this.moveInitialX+t.touches[0].clientX,y:this.moveInitialY+t.touches[0].clientY}):this.setPosition({x:this.moveInitialX+t.clientX,y:this.moveInitialY+t.clientY}),this.callbacks.onPuzzleTileMoved(this)},i.handleTileMoveEnded=function(){this.tile.removeEventListener("touchmove",this.handleTileMoved,!1),this.tile.removeEventListener("touchend",this.handleTileMoveEnded,!1),document.removeEventListener("mousemove",this.handleTileMoved,!0),document.removeEventListener("mouseup",this.handleTileMoveEnded,!0),this.tile.classList.add("animate-move"),this.callbacks.onPuzzleTileMoveEnded(this)},i.handleAnimationMoveEnded=function(){this.tile.style.transitionDuration="",this.tile.classList.remove("animate-move"),this.tile.removeEventListener("transitionend",this.handleAnimationMoveEnded)},t}();i.PATHS={"top-left":"M @off, @off l @w, 0 l 0, @gaph a 1 1 0 0 0 0 @knob l 0, @gaph l -@gapw, 0 a 1 1 0 0 0 -@knob 0 l -@gapw, 0 l 0 -@h Z","top-inner":"M @offknob, @off l @w, 0 l 0, @gaph a 1 1 0 0 0 0 @knob l 0, @gaph l -@gapw, 0 a 1 1 0 0 0 -@knob 0 l -@gapw, 0 l 0, -@gaph a 1 1 0 0 1 0 -@knob l 0, -@gaph Z","top-right":"M @offknob, @off l @w, 0 l 0, @h l -@gapw, 0 a 1 1 0 0 0 -@knob 0 l -@gapw, 0 l 0, -@gaph a 1 1 0 0 1 0 -@knob l 0, -@gaph Z","inner-left":"M @off, @offknob l @gapw, 0 a 1 1 0 0 1 @knob 0 l @gapw, 0 l 0, @gaph a 1 1 0 0 0 0 @knob l 0, @gaph l -@gapw, 0 a 1 1 0 0 0 -@knob 0 l -@gapw, 0 l 0, -@h Z","inner-inner":"M @offknob, @offknob l @gapw, 0 a 1 1 0 0 1 @knob 0 l @gapw, 0 l 0, @gaph a 1 1 0 0 0 0 @knob l 0, @gaph l -@gapw, 0 a 1 1 0 0 0 -@knob 0 l -@gapw, 0 l 0, -@gaph a 1 1 0 0 1 0 -@knob l 0, -@gaph Z","inner-right":"M @offknob, @offknob l @gapw, 0 a 1 1 0 0 1 @knob 0 l @gapw, 0 l 0, @h l -@gapw, 0 a 1 1 0 0 0 -@knob 0 l -@gapw, 0 l 0, -@gaph a 1 1 0 0 1 0 -@knob l 0, -@gaph Z","bottom-left":"M @off, @offknob l @gapw, 0 a 1 1 0 0 1 @knob 0 l @gapw, 0 l 0, @gaph a 1 1 0 0 0 0 @knob l 0, @gaph l -@w, 0 l 0, -@h Z","bottom-inner":"M @offknob, @offknob l @gapw, 0 a 1 1 0 0 1 @knob 0 l @gapw, 0 l 0, @gaph a 1 1 0 0 0 0 @knob l 0, @gaph l -@w, 0 l 0, -@gaph a 1 1 0 0 1 0 -@knob l 0, -@gaph Z","bottom-right":"M @offknob, @offknob l @gapw, 0 a 1 1 0 0 1 @knob 0 l @gapw, 0 l 0, @h l -@w, 0 l 0, -@gaph a 1 1 0 0 1 0 -@knob l 0, -@gaph Z"},i.PATHS_BORDER={"horizontal-straight":"l @w, 0","horizontal-up":"l @gapw, 0 a 1 1 0 0 1 @knob 0 l @gapw, 0","horizontal-down":"l @gapw, 0 a 1 1 0 0 0 @knob 0 l @gapw, 0","vertical-straight":"l 0, @h","vertical-left":"l 0, @gaph a 1 1 0 0 0 0 @knob l 0, @gaph","vertical-right":"l 0, @gaph a 1 1 0 0 1 0 @knob l 0, @gaph"};let s=function(){function t(t,i){this.params=e.extend({a11y:{active:"",disabled:"",inactive:""},active:!1,classes:[],disabled:!1,hidden:!1,type:"pulse",noTabWhenDisabled:!1},t||{}),Array.isArray(this.params.classes)||(this.params.classes=[this.params.classes]),"pulse"===this.params.type&&(this.params.a11y.inactive||(this.params.a11y.inactive=this.params.a11y.active||""),this.params.a11y.active||(this.params.a11y.active=this.params.a11y.inactive||"")),this.active=this.params.active,this.disabled=this.params.disabled,this.visible=!this.params.hidden,this.callbacks=e.extend({onClick:()=>{}},i),this.button=document.createElement("button"),this.params.classes&&this.params.classes.forEach((t=>{this.button.classList.add(t)})),this.button.setAttribute("aria-pressed",this.params.active),this.button.setAttribute("tabindex","0"),!0===this.params.active?this.activate():this.deactivate(),!0===this.params.disabled?this.disable():this.enable(),!0===this.params.hidden?this.hide():this.show(),this.button.addEventListener("click",(t=>{this.disabled||("toggle"===this.params.type&&this.toggle(),this.callbacks.onClick(t))}))}var i=t.prototype;return i.getDOM=function(){return this.button},i.show=function(){this.button.classList.remove("h5p-jigsaw-puzzle-display-none"),this.visible=!0},i.hide=function(){this.button.classList.add("h5p-jigsaw-puzzle-display-none"),this.visible=!1},i.enable=function(){this.disabled=!1,this.button.classList.remove("h5p-jigsaw-puzzle-button-disabled"),this.params.noTabWhenDisabled&&this.button.setAttribute("tabindex",0),this.active?this.activate():this.deactivate()},i.disable=function(){this.button.classList.add("h5p-jigsaw-puzzle-button-disabled"),this.button.setAttribute("aria-label",this.params.a11y.disabled),this.params.noTabWhenDisabled&&this.button.setAttribute("tabindex",-1),this.disabled=!0},i.activate=function(){this.disabled||("toggle"===this.params.type&&(this.button.classList.add("h5p-jigsaw-puzzle-button-active"),this.button.setAttribute("aria-pressed",!0)),this.button.setAttribute("aria-label",this.params.a11y.active),this.active=!0)},i.deactivate=function(){this.disabled||(this.active=!1,"toggle"===this.params.type&&(this.button.classList.remove("h5p-jigsaw-puzzle-button-active"),this.button.setAttribute("aria-pressed",!1)),this.button.setAttribute("aria-label",this.params.a11y.inactive))},i.toggle=function(t){this.disabled||((t="boolean"==typeof t?t:!this.active)?this.activate():this.deactivate())},i.isActive=function(){return this.active},i.isDisabled=function(){return this.disabled},i.isVisible=function(){},t}(),n=function(){function t(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.params=e.extend({a11y:{buttonFullscreenEnter:"Enter fullscreen mode",buttonFullscreenExit:"Exit fullscreen mode",buttonAudioMute:"Mute music",buttonAudioUnmute:"Unmute music"}},t),this.callbacks=e.extend({onButtonFullscreenClicked:()=>{},onButtonAudioClicked:()=>{}},i),this.numberVisibleButtons=0,this.titleBar=document.createElement("div"),this.titleBar.classList.add("h5p-jigsaw-puzzle-title-bar"),this.buttonAudio=new s({type:"toggle",classes:["h5p-jigsaw-puzzle-button","h5p-jigsaw-puzzle-button-audio"],disabled:!0,noTabWhenDisabled:!0,hidden:!0,a11y:{active:this.params.a11y.buttonAudioMute,inactive:this.params.a11y.buttonAudioUnmute,disabled:this.params.a11y.disabled}},{onClick:t=>{this.callbacks.onButtonAudioClicked(t)}}),this.titleBar.appendChild(this.buttonAudio.getDOM()),this.buttonFullscreen=new s({type:"toggle",classes:["h5p-jigsaw-puzzle-button","h5p-jigsaw-puzzle-button-fullscreen"],disabled:!0,noTabWhenDisabled:!0,hidden:!0,a11y:{active:this.params.a11y.buttonFullscreenExit,inactive:this.params.a11y.buttonFullscreenEnter,disabled:this.params.a11y.disabled}},{onClick:()=>{this.callbacks.onButtonFullscreenClicked()}}),this.titleBar.appendChild(this.buttonFullscreen.getDOM())}var i=t.prototype;return i.getDOM=function(){return this.titleBar},i.showFullscreenButton=function(){this.buttonFullscreen.show(),this.numberVisibleButtons++,this.visible||this.show()},i.showAudioButton=function(){this.buttonAudio.show(),this.numberVisibleButtons++,this.visible||this.show()},i.disableFullscreenButton=function(){this.buttonFullscreen.disable()},i.disableAudioButton=function(){this.buttonAudio.disable()},i.enableFullscreenButton=function(){this.buttonFullscreen.enable()},i.enableAudioButton=function(){this.buttonAudio.enable()},i.getAudioButtonState=function(){return this.buttonAudio.isActive()},i.toggleFullscreenButton=function(t){"string"==typeof t&&("enter"===t?t=!1:"exit"===t&&(t=!0)),"boolean"==typeof t&&this.buttonFullscreen.toggle(t)},i.toggleAudioButton=function(t){"string"==typeof t&&("mute"===t?t=!1:"unmute"===t&&(t=!0)),"boolean"==typeof t&&this.buttonAudio.toggle(t)},i.hasVisibleButtons=function(){return this.numberVisibleButtons>0},i.show=function(){this.titleBar.classList.remove("display-none"),this.visible=!0},i.hide=function(){this.titleBar.classList.add("display-none"),this.false=!0},t}(),a=function(){function t(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.params=t,this.callbacks=e.extend({onResize:()=>{},onCompleted:()=>{},onButtonFullscreenClicked:()=>{},onInteracted:()=>{}},i),this.audios=[],this.tiles=[],this.tilesCreated=0,this.originalSize=null,this.maxSize={heigth:null,width:null},this.borderWidth=2,this.isAnswerGiven=!1,this.h5pQuestionContent=null,this.h5pQuestionButtons=null,this.content=document.createElement("div"),this.content.classList.add("h5p-jigsaw-puzzle-content"),!this.params?.puzzleImageInstance?.source){const t=document.createElement("div");return t.classList.add("h5p-jigsaw-puzzle-message"),t.innerText=this.params.l10n.messageNoImage,void this.content.appendChild(t)}this.addTitlebar(),this.addPuzzleArea(),this.image=document.createElement("img"),this.image.addEventListener("load",(()=>{this.handleImageLoaded(this.params.imageFormat)})),this.imageCrossOrigin="function"==typeof H5P.getCrossOrigin?H5P.getCrossOrigin(t.puzzleImageInstance.source):"Anonymous",this.image.src=t.puzzleImageInstance.source,"undefined"==typeof H5PEditor&&this.addAudios()}var s=t.prototype;return s.getDOM=function(){return this.content},s.addTitlebar=function(){this.titlebar=new n({a11y:{buttonFullscreenEnter:this.params.a11y.buttonFullscreenEnter,buttonFullscreenExit:this.params.a11y.buttonFullscreenExit,buttonAudioMute:this.params.a11y.buttonAudioMute,buttonAudioUnmute:this.params.a11y.buttonAudioUnmute,disabled:this.params.a11y.disabled}},{onButtonAudioClicked:t=>{this.handleButtonAudioClicked(t)},onButtonFullscreenClicked:t=>{this.handleButtonFullscreenClicked(t)}}),this.content.appendChild(this.titlebar.getDOM())},s.addPuzzleArea=function(){this.puzzleArea=document.createElement("div"),this.puzzleArea.classList.add("h5p-jigsaw-puzzle-puzzle-area"),"column"===this.params.sortingSpacePosition&&this.puzzleArea.classList.add("h5p-jigsaw-puzzle-puzzle-direction-column"),this.content.appendChild(this.puzzleArea),this.puzzleDropzone=document.createElement("div"),this.puzzleDropzone.classList.add("h5p-jigsaw-puzzle-tile-container"),this.puzzleArea.appendChild(this.puzzleDropzone),window.requestAnimationFrame((()=>{const t=window.getComputedStyle(this.puzzleDropzone);this.borderWidth=parseFloat(t.getPropertyValue("border-width"))||this.borderWidth})),this.sortingArea=document.createElement("div"),this.sortingArea.classList.add("h5p-jigsaw-puzzle-sorting-area"),"row"===this.params.sortingSpacePosition&&(this.sortingArea.style.width=100*this.params.sortingSpace/(100-this.params.sortingSpace)+"%"),this.puzzleArea.appendChild(this.sortingArea)},s.createPuzzleTile=function(t){const e=this.image.naturalWidth/this.params.size.width,s=this.image.naturalHeight/this.params.size.height,n=Math.min(e,s)/2,a=e+(t.x>0?n/2:0),o=s+(t.y>0?n/2:0),h={top:{orientation:0===t.y?"straight":"up",opacity:1},right:{orientation:t.x+1===this.params.size.width?"straight":"left",opacity:1},bottom:{orientation:t.y+1===this.params.size.height?"straight":"up",opacity:1},left:{orientation:0===t.x?"straight":"left",opacity:1}};let l="inner";0===t.y?l="top":t.y+1===this.params.size.height&&(l="bottom");let r="inner";0===t.x?r="left":t.x+1===this.params.size.width&&(r="right");const d=`${l}-${r}`;return new i({id:t.y*this.params.size.width+t.x,baseWidth:e,baseHeight:s,width:a,height:o,gridPosition:{x:t.x,y:t.y},knobSize:n,imageSource:this.image.src,imageCrossOrigin:this.imageCrossOrigin,type:d,stroke:this.params.stroke,borderColor:this.params.tileBorderColor,borders:h,uuid:this.params.uuid,container:this.puzzleArea,size:this.params.size},{onPuzzleTileCreated:t=>{this.handlePuzzleTileCreated(t)},onPuzzleTileMoveStarted:t=>{this.handlePuzzleTileMoveStarted(t)},onPuzzleTileMoved:t=>{this.handlePuzzleTileMoved(t)},onPuzzleTileMoveEnded:t=>{this.handlePuzzleTileMoveEnded(t)}})},s.setTilePosition=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.tile&&("number"!=typeof t.x||t.x<0||"number"!=typeof t.y||t.y<0||(t.animate=t.animate??!1,t.animate&&t.tile.animateMove({duration:t.duration}),this.tiles[t.tile.getId()].position={x:(t.x-this.puzzleDropzone.offsetLeft)/this.puzzleDropzone.offsetWidth,y:(t.y-this.puzzleDropzone.offsetTop)/this.puzzleDropzone.offsetHeight},t.tile.setPosition({x:t.x,y:t.y})))},s.getAssetPath=function(t){if(-1!==t.indexOf("sites/default/files/h5p/development"))return t;let e=null;const i=H5PIntegration?.contents[`cid-${this.params.contentId}`]?.library;if(-1!==i?.indexOf("H5P.JigsawPuzzle ")&&(e=i.replace(" ","-")),!e){const t=H5PIntegration?.contents[`cid-${this.params.contentId}`]?.jsonContent;if(!t)return null;const i=RegExp('"library":"(H5P.JigsawPuzzle [0-9]+.[0-9]+)"'),s=t.match(i);s&&(e=s[1].replace(" ","-"))}if(!e)return null;return`${H5P.getLibraryPath(e)}/dist${t.substr(t.indexOf("/assets"))}`},s.addAudios=function(){this.params.sound&&!this.audiosDefined&&H5P.SoundJS.initializeDefaultPlugins()&&(H5P.SoundJS.alternateExtensions=["mp3"],["puzzleStarted","puzzleTilePickUp","puzzleTileCorrect","puzzleTileIncorrect","puzzleCompleted"].forEach((t=>{this.params.sound[t]&&this.params.sound[t].length>0&&this.params.sound[t][0].path&&(H5P.SoundJS.registerSound(H5P.getPath(this.params.sound[t][0].path,this.params.contentId),t),this.hasAudios=!0)})),this.audiosDefined=!0)},s.startAudio=function(t){this.isAudioEnabled&&H5P.SoundJS.play(t,H5P.SoundJS.INTERRUPT_NONE,0)},s.stopAudios=function(){H5P.SoundJS.stop()},s.setH5PQuestionElements=function(t){this.h5pQuestionContent=t.querySelector(".h5p-question-content"),this.h5pQuestionButtons=t.querySelector(".h5p-question-buttons")},s.enableFullscreenButton=function(){this.titlebar&&(this.titlebar.enableFullscreenButton(),this.titlebar.showFullscreenButton())},s.toggleFullscreen=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.titlebar.toggleFullscreenButton(t),this.setFixedHeight(t)},s.setFixedHeight=function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){const t=window.getComputedStyle(this.h5pQuestionContent),e=parseFloat(t.getPropertyValue("margin-bottom")),i=parseFloat(t.getPropertyValue("margin-left"))+parseFloat(t.getPropertyValue("margin-right")),s=window.getComputedStyle(this.h5pQuestionButtons),n=parseFloat(s.getPropertyValue("margin-bottom"))+parseFloat(s.getPropertyValue("margin-top"));this.maxSize={height:window.innerHeight-2*this.params.stroke-this.puzzleArea.offsetTop-e-n-this.h5pQuestionButtons.offsetHeight,width:(window.innerWidth-2*this.params.stroke-i)*(100-this.params.sortingSpace)/100}}else this.maxSize={heigth:null,width:null};this.handleResized()},s.reset=function(){setTimeout((()=>{this.tiles.forEach((t=>{this.showTileBorders(t.instance),t.instance.enable(),t.instance.setDone(!1)})),this.randomizeTiles({useFullArea:this.params.useFullArea,layout:this.params.randomizerPattern,keepDone:!1}),this.isAnswerGiven=!1,this.tilesCreated=0,this.startAudio("puzzleStarted")}),0)},s.randomizeTiles=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.shuffleArray(this.tiles);for(let t=i.length;t>=0;t--)this.puzzleArea.appendChild(i[Math.random()*t|0].instance.getDOM());t.keepDone&&(i=i.map((t=>t.instance.isDone?null:t)));const s=this.tiles.reduce(((t,e)=>({width:Math.max(t.width,e.instance.getSize().width),height:Math.max(t.height,e.instance.getSize().height)})),{width:0,height:0}),n=t.useFullArea||this.sortingArea.offsetWidth<s.width||this.sortingArea.offsetHeight<s.height,a={left:this.puzzleArea.offsetLeft,top:this.puzzleArea.offsetTop};n||(a.left+="column"===this.params.sortingSpacePosition?0:this.puzzleDropzone.offsetWidth,a.top+="column"===this.params.sortingSpacePosition?this.puzzleDropzone.offsetHeight:0);const o={x:this.sortingArea.offsetWidth-s.width,y:this.sortingArea.offsetHeight-s.height};n&&(o.x+="column"===this.params.sortingSpacePosition?0:this.puzzleDropzone.offsetWidth,o.y+="column"===this.params.sortingSpacePosition?this.puzzleDropzone.offsetHeight:0),i.forEach((t=>{if(null===t)return;const e=t.instance;let i=0,s=0;i=a.left+Math.random()*o.x,s=a.top+Math.random()*o.y,this.setTilePosition({tile:e,x:i,y:s,animate:!0})}))},s.moveTileToTarget=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.animate=e.animate??!1;const i=t.getSize(),s=t.getGridPosition(),n={x:this.puzzleDropzone.offsetLeft+s.x*i.width-Math.sign(s.x)*i.knob/2-s.x*i.knob/2,y:this.puzzleDropzone.offsetTop+s.y*i.height-Math.sign(s.y)*i.knob/2-s.y*i.knob/2};this.setTilePosition({tile:t,x:n.x,y:n.y,animate:e.animate})},s.moveTilesToTarget=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t?t.map((t=>t.instance?t:{instance:t})):this.tiles,e.animate=e.animate??!0,e.finalize=e.finalize??!0,t.forEach((t=>{this.moveTileToTarget(t.instance,{animate:e.animate}),e.finalize&&this.finalizeTile(t.instance)}))},s.finalizeTile=function(t){t.disable(),t.putInBackground(),this.hideTileBorders(t),t.setDone(!0)},s.updatePuzzleOutlines=function(t,e){const i=e.getDOM(),s=this.puzzleOutlines[t];s.style.width=i.style.width,s.style.height=i.style.height;const n=e.getSize(),a=e.getGridPosition(),o=this.puzzleDropzone.offsetLeft+a.x*n.width-Math.sign(a.x)*n.knob/2-a.x*n.knob/2,h=this.puzzleDropzone.offsetTop+a.y*n.height-Math.sign(a.y)*n.knob/2-a.y*n.knob/2;if(this.puzzleOutlines[t].style.left=`${o}px`,this.puzzleOutlines[t].style.top=`${h}px`,!s.isConnected){if(this.puzzleDropzone.appendChild(s),e.getId()<this.params.size.width){const t=s.querySelector(".border-top");t&&t.setAttribute("stroke-opacity","0")}if(e.getId()%this.params.size.width==this.params.size.width-1){const t=s.querySelector(".border-right");t&&t.setAttribute("stroke-opacity","0")}if(this.params.size.width*(this.params.size.height-1)-1<e.getId()){const t=s.querySelector(".border-bottom");t&&t.setAttribute("stroke-opacity","0")}if(e.getId()%this.params.size.width==0){const t=s.querySelector(".border-left");t&&t.setAttribute("stroke-opacity","0")}}},s.showTileBorders=function(t){t.setBorders({top:!0,right:!0,bottom:!0,left:!0})},s.hideTileBorders=function(t){if(t.getId()<this.params.size.width)t.setBorders({top:!1});else{const e=this.tiles[t.getId()-this.params.size.width].instance;e.isDisabled&&(t.setBorders({top:!1}),e.setBorders({bottom:!1}))}if(t.getId()%this.params.size.width==this.params.size.width-1)t.setBorders({right:!1});else{const e=this.tiles[t.getId()+1].instance;e.isDisabled&&(t.setBorders({right:!1}),e.setBorders({left:!1}))}if(this.params.size.width*(this.params.size.height-1)-1<t.getId())t.setBorders({bottom:!1});else{const e=this.tiles[t.getId()+this.params.size.width].instance;e.isDisabled&&(t.setBorders({bottom:!1}),e.setBorders({top:!1}))}if(t.getId()%this.params.size.width==0)t.setBorders({left:!1});else{const e=this.tiles[t.getId()-1].instance;e.isDisabled&&(t.setBorders({left:!1}),e.setBorders({right:!1}))}},s.getAnswerGiven=function(){return this.isAnswerGiven},s.getScore=function(){return this.tiles.reduce(((t,e)=>t+(e.instance.isDone?1:0)),0)},s.getCurrentState=function(){return{audioButtonState:this.titlebar.getAudioButtonState(),tiles:this.tiles.map((t=>t.instance.isDone))}},s.handleImageLoaded=function(t){this.originalSize={width:this.image.naturalWidth,height:this.image.naturalHeight};for(let e=0;e<this.params.size.height;e++)for(let i=0;i<this.params.size.width;i++)this.tiles.push({instance:this.createPuzzleTile({x:i,y:e,format:t}),position:{x:0,y:0}});if(this.params.showBackground){const t=document.createElement("img");t.classList.add("h5p-jigsaw-puzzle-background-image"),t.setAttribute("src",this.image.src),this.puzzleDropzone.appendChild(t)}this.hasAudios&&(this.titlebar.showAudioButton(),this.titlebar.enableAudioButton(),this.isAudioEnabled=this.params?.previousState?.audioButtonState||!0,this.titlebar.toggleAudioButton(this.isAudioEnabled)),this.handleResized()},s.handleResized=function(){if(this.originalSize){const t=(this.puzzleDropzone.offsetWidth-this.borderWidth)/this.originalSize.width,e={height:t*this.originalSize.height-this.borderWidth,width:t*this.originalSize.width-this.borderWidth};if(this.maxSize.height&&(this.puzzleDropzone.style.width||e.height>this.maxSize.height||e.width>this.maxSize.width)?((this.maxSize.height-this.borderWidth)/this.originalSize.height<(this.maxSize.width-this.borderWidth)/this.originalSize.width?(this.scale=(this.maxSize.height-this.borderWidth)/this.originalSize.height,this.puzzleDropzone.style.height=this.maxSize.height-2*this.borderWidth+"px",this.puzzleDropzone.style.width=this.scale*this.originalSize.width-this.borderWidth+"px"):(this.scale=(this.maxSize.width-this.borderWidth)/this.originalSize.width,this.puzzleDropzone.style.height=this.scale*this.originalSize.height-this.borderWidth+"px",this.puzzleDropzone.style.width=this.maxSize.width-2*this.borderWidth+"px"),this.puzzleDropzone.style.flexShrink=0):(this.scale=t,this.puzzleDropzone.style.height=`${e.height}px`,this.puzzleDropzone.style.width="",this.puzzleDropzone.style.flexShrink=""),"column"===this.params.sortingSpacePosition){const t=this.params.sortingSpaceColumn/100*parseFloat(this.puzzleDropzone.style.height);this.sortingArea.style.height=`${t}px`}this.tiles.forEach(((t,e)=>{t.instance.setScale(this.scale),t.instance.setPosition({x:t.position.x*this.puzzleDropzone.offsetWidth+this.puzzleDropzone.offsetLeft,y:t.position.y*this.puzzleDropzone.offsetHeight+this.puzzleDropzone.offsetTop}),this.puzzleOutlines&&this.updatePuzzleOutlines(e,t.instance)}))}this.callbacks.onResize()},s.handlePuzzleTileMoveStarted=function(t){this.tiles.forEach((t=>{t.instance.putInBackground(),t.instance.isDisabled||t.instance.ghost()})),t.putOnTop(),t.unghost(),this.startAudio("puzzleTilePickUp")},s.handlePuzzleTileMoved=function(){},s.handlePuzzleTileMoveEnded=function(e){this.tiles.forEach((t=>{t.instance.unghost()}));const i=e.getPosition(),s=e.getSize(),n=e.getGridPosition();this.tiles[e.getId()].position=i;const a={x:this.puzzleDropzone.offsetLeft+n.x*s.width-Math.sign(n.x)*s.knob/2-n.x*s.knob/2,y:this.puzzleDropzone.offsetTop+n.y*s.height-Math.sign(n.y)*s.knob/2-n.y*s.knob/2},o=Math.min(s.width,s.height)*t.SLACK_FACTOR;Math.abs(i.x-a.x)<o&&Math.abs(i.y-a.y)<o?(this.setTilePosition({tile:e,x:a.x,y:a.y}),this.finalizeTile(e),this.startAudio("puzzleTileCorrect")):(this.setTilePosition({tile:e,x:i.x,y:i.y}),e.setDone(!1),this.startAudio("puzzleTileIncorrect")),this.isAnswerGiven=!0,this.callbacks.onInteracted(),this.tiles.every((t=>t.instance.isDone))&&this.handlePuzzleCompleted({xAPI:!0})},s.handleButtonAudioClicked=function(t){const e=t?.currentTarget.classList||[];this.isAudioEnabled=-1!==[...e].indexOf("h5p-jigsaw-puzzle-button-active"),this.isAudioEnabled||this.stopAudios()},s.handleButtonFullscreenClicked=function(){this.callbacks.onButtonFullscreenClicked()},s.handlePuzzleCompleted=function(t){this.startAudio("puzzleCompleted"),this.callbacks.onCompleted(t)},s.handlePuzzleTileCreated=function(t){if(this.params.previousState.tiles&&!0===this.params.previousState.tiles[t.getId()]&&this.moveTilesToTarget([t],{animate:!1,finalize:!0}),this.puzzleArea.appendChild(t.getDOM()),this.tilesCreated++,this.tilesCreated===this.params.size.width*this.params.size.height){if(this.params.showPuzzleOutlines){let t=window.getComputedStyle(this.puzzleDropzone).getPropertyValue("border-color").replace(/[^.^\d,]/g,"").split(",").map((t=>parseFloat(t,10)));4===t.length?t[3]/=2:t=[0,0,0,.05],t=`rgba(${t.join(",")})`,setTimeout((()=>{this.puzzleOutlines=this.tiles.map((e=>{const i=e.instance.getDOM().cloneNode(!0);i.setAttribute("disabled","disabled");const s=i.querySelector("svg path");s&&s.parentNode.removeChild(s);return i.querySelectorAll("svg path").forEach((e=>{e.setAttribute("stroke",t)})),i}))}),0)}setTimeout((()=>{this.handleResized(),this.handleAllTilesCreated()}),0)}},s.handleAllTilesCreated=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(this.puzzleArea?.offsetWidth>0)this.handleDOMVisible();else{if(0===e)return void this.tiles.forEach((t=>{t.instance.show()}));this.tiles.forEach((t=>{t.instance.hide()})),clearTimeout(this.timeoutWaitForPuzzleArea),this.timeoutWaitForPuzzleArea=setTimeout((()=>{this.handleAllTilesCreated(t,e-1)}),t)}},s.handleDOMVisible=function(){this.tiles.forEach((t=>{t.instance.show()})),this.moveTilesToTarget(this.tiles,{animate:!1,finalize:!1}),setTimeout((()=>{this.randomizeTiles({useFullArea:this.params.useFullArea,keepDone:Object.keys(this.params.previousState).length>0}),this.startAudio("puzzleStarted"),window.requestAnimationFrame((()=>{this.isPuzzleSetUp=!0,setTimeout((()=>{this.handleResized()}),250)}))}),500)},s.updateTitlebarVisibility=function(){this.titlebar.hasVisibleButtons()||this.titlebar.hide()},t}();function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}a.SLACK_FACTOR=.25;let h=function(t){function i(i,s){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(n=t.call(this,"jigsaw-puzzle")||this).params=e.extend({tilesHorizontal:4,tilesVertical:3,behaviour:{sortingSpacePosition:"row",sortingSpace:50,sortingSpaceColumn:100,useFullArea:!1,enableComplete:!0,enableSolutionsButton:!0,enableRetry:!0,showBackground:!0,showPuzzleOutlines:!0},l10n:{complete:"Complete",tryAgain:"Retry",messageNoImage:"There was no image given for this jigsaw puzzle."},a11y:{buttonFullscreenEnter:"Enter fullscreen mode",buttonFullscreenExit:"Exit fullscreen mode",complete:"Complete the puzzle. All tiles will be put to their correct position.",tryAgain:"Retry the puzzle. All puzzle tiles will be shuffled on the canvas.",disabled:"Disabled",close:"Close"}},i);for(let t in n.params.l10n)n.params.l10n[t]=e.stripHTML(e.htmlDecode(n.params.l10n[t]));for(let t in n.params.a11y)n.params.a11y[t]=e.stripHTML(e.htmlDecode(n.params.a11y[t]));return n.contentId=s,n.extras=a,n.previousState=n.extras.previousState||{},n.uuid=H5P.createUUID(),n.params.puzzleImage&&(n.puzzleImageInstance=H5P.newRunnable(n.params.puzzleImage,n.contentId)),n.on("resize",(()=>{n.handleH5PResized()})),n}var s,n;n=t,(s=i).prototype=Object.create(n.prototype),s.prototype.constructor=s,o(s,n);var h=i.prototype;return h.registerDomElements=function(){this.content=new a({contentId:this.contentId,imageFormat:this.params?.puzzleImage?.params?.file?.mime,previousState:this.previousState,puzzleImageInstance:this.puzzleImageInstance,showBackground:this.params.behaviour.showBackground,showPuzzleOutlines:this.params.behaviour.showPuzzleOutlines,size:{width:this.params.tilesHorizontal,height:this.params.tilesVertical},sortingSpacePosition:this.params.behaviour.sortingSpacePosition,sortingSpace:this.params.behaviour.sortingSpace,sortingSpaceColumn:this.params.behaviour.sortingSpaceColumn,sound:this.params.sound||{},stroke:Math.max(window.innerWidth/750,1.75),tileBorderColor:"rgba(88, 88, 88, 0.5)",useFullArea:this.params.behaviour.useFullArea,uuid:this.uuid,a11y:{buttonFullscreenEnter:this.params.a11y.buttonFullscreenEnter,buttonFullscreenExit:this.params.a11y.buttonFullscreenExit,disabled:this.params.a11y.disabled,close:this.params.a11y.close},l10n:{messageNoImage:this.params.l10n.messageNoImage}},{onResize:()=>{this.handleOnResize()},onCompleted:t=>{this.handlePuzzleCompleted(t)},onButtonFullscreenClicked:()=>{this.toggleFullscreen()},onInteracted:()=>{this.handleInteracted()}}),this.setContent(this.content.getDOM()),this.params?.puzzleImage?.params?.file?.path&&(this.addButtons(),"complete"===document.readyState?window.requestAnimationFrame((()=>{this.handleDOMInitialized()})):document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&window.requestAnimationFrame((()=>{this.handleDOMInitialized()}))})),window.addEventListener("orientationchange",(()=>{H5P.isFullscreen&&setTimeout((()=>{this.content.setFixedHeight(!0)}),200)}),!1))},h.addButtons=function(){this.addButton("complete",this.params.l10n.complete,(()=>{this.handleClickButtonComplete({xAPI:!0})}),this.params.behaviour.enableComplete&&this.previousState?.tiles?.some((t=>!t)),{"aria-label":this.params.a11y.complete},{}),this.addButton("try-again",this.params.l10n.tryAgain,(()=>{this.handleClickButtonRetry()}),this.params.behaviour.enableRetry&&!!this.previousState?.tiles&&this.previousState?.tiles?.some((t=>t)),{"aria-label":this.params.a11y.tryAgain},{})},h.disableButtons=function(){for(let t in this.buttons)this.disableButton(t)},h.disableButton=function(t){this.buttons[t]&&(this.buttons[t].setAttribute("disabled",!0),this.buttons[t].classList.add("disabled"))},h.enableButtons=function(){for(let t in this.buttons)this.enableButton(t)},h.enableButton=function(t){this.buttons[t]&&(this.buttons[t].removeAttribute("disabled"),this.buttons[t].classList.remove("disabled"))},h.toggleFullscreen=function(t){this.container&&("string"==typeof t&&("enter"===t?t=!1:"exit"===t&&(t=!0)),"boolean"!=typeof t&&(t=!H5P.isFullscreen),!0===t?H5P.fullScreen(H5P.jQuery(this.container),this):(H5P.exitFullScreen(),setTimeout((()=>{this.trigger("resize")}),100),setTimeout((()=>{this.trigger("resize")}),500)))},h.getAnswerGiven=function(){return!!this.content&&this.content.getAnswerGiven()},h.getScore=function(){return this.content?this.content.getScore():0},h.getMaxScore=function(){return this.params.tilesHorizontal*this.params.tilesVertical},h.showSolutions=function(){this.content||(this.handleClickButtonComplete({xAPI:!1}),this.trigger("resize"))},h.resetTask=function(){this.params.behaviour.enableComplete&&this.showButton("complete"),this.hideButton("try-again"),this.content&&this.content.reset(),this.trigger("resize")},h.getXAPIData=function(){return{statement:this.getXAPIAnsweredEvent().data.statement}},h.getXAPIAnsweredEvent=function(){const t=this.createXAPIEvent("answered");return t.setScoredResult(this.getScore(),this.getMaxScore(),this,!0,this.isPassed()),t},h.createXAPIEvent=function(t){const i=this.createXAPIEventTemplate(t);return e.extend(i.getVerifiedStatementValue(["object","definition"]),this.getxAPIDefinition()),i},h.getxAPIDefinition=function(){let t=this.getDescription();return{name:{"en-US":this.getTitle()},description:{"en-US":t},type:"http://adlnet.gov/expapi/activities/cmi.interaction",interactionType:"other"}},h.isPassed=function(){return this.getScore()>=this.getMaxScore()},h.getTitle=function(){let t;return this.extras.metadata&&(t=this.extras.metadata.title),t=t||i.DEFAULT_DESCRIPTION,H5P.createTitle(t)},h.getDescription=function(){return this.params.taskDescription||i.DEFAULT_DESCRIPTION},h.getCurrentState=function(){if(this.params?.puzzleImage?.params?.file?.path&&this.content)return this.content.getCurrentState()},h.handleDOMInitialized=function(){this.container=e.closestParent(this.content.getDOM(),".h5p-jigsaw-puzzle"),this.container&&(this.content.setH5PQuestionElements(this.container),this.isRoot()&&H5P.fullscreenSupported?(this.content.enableFullscreenButton(),this.on("enterFullScreen",(()=>{setTimeout((()=>{this.content.toggleFullscreen(!0)}),200)})),this.on("exitFullScreen",(()=>{this.content.toggleFullscreen(!1)}))):this.content.updateTitlebarVisibility(),this.buttons={},this.buttons.complete=this.container.querySelector(".h5p-question-complete"),this.buttons["try-again"]=this.container.querySelector(".h5p-question-try-again"))},h.handleH5PResized=function(){!this.bubblingUpwards&&this.content&&this.content.handleResized()},h.handleOnResize=function(){this.bubblingUpwards=!0,this.trigger("resize"),this.bubblingUpwards=!1},h.handleInteracted=function(){this.getScore()>0&&this.showButton("try-again"),this.triggerXAPI("interacted")},h.handlePuzzleCompleted=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.hideButton("complete"),this.showButton("try-again"),t.xAPI&&this.trigger(this.getXAPIAnsweredEvent())},h.handleClickButtonComplete=function(t){this.handleInteracted(),this.content.handlePuzzleCompleted(t),this.content.moveTilesToTarget()},h.handleClickButtonRetry=function(){this.resetTask()},i}(H5P.Question);h.DEFAULT_DESCRIPTION="Jigsaw Puzzle",H5P.JigsawPuzzle=h}();